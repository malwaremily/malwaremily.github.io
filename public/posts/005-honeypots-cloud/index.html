<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>HoneyTraps in the Cloud 101 | malwaremily</title><meta name=keywords content="honeypot,Go,SSH,analysis,GCP,tutorial,HoneyTrap,Docker"><meta name=description content="SSH Honeypot on GCP Tutorial"><meta name=author content="malwaremily"><link rel=canonical href=https://malwaremily.com/posts/005-honeypots-cloud/><meta name=google-site-verification content="G-ZSJEE4YGQQ"><link href=/assets/css/stylesheet.min.2a79645f388444ef452f62dadbadeebdfebba13b08d1b841a7504a7be022e74d.css integrity="sha256-KnlkXziERO9FL2La263uvf67oTsI0bhBp1BKe+Ai500=" rel="preload stylesheet" as=style><link rel=icon href=https://malwaremily.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://malwaremily.com/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://malwaremily.com/favicon.ico><link rel=apple-touch-icon href=https://malwaremily.com/favicon.ico><link rel=mask-icon href=https://malwaremily.com/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.80.0"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','G-ZSJEE4YGQQ','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><meta property="og:title" content="HoneyTraps in the Cloud 101"><meta property="og:description" content="SSH Honeypot on GCP Tutorial"><meta property="og:type" content="article"><meta property="og:url" content="https://malwaremily.com/posts/005-honeypots-cloud/"><meta property="og:image" content="https://malwaremily.com/img/005-logs.png"><meta property="article:published_time" content="2021-01-25T00:00:03+00:00"><meta property="article:modified_time" content="2021-01-25T00:00:03+00:00"><meta property="og:site_name" content="malwaremily"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://malwaremily.com/img/005-logs.png"><meta name=twitter:title content="HoneyTraps in the Cloud 101"><meta name=twitter:description content="SSH Honeypot on GCP Tutorial"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"HoneyTraps in the Cloud 101","name":"HoneyTraps in the Cloud 101","description":"Updated 2021-03-01: Give the reader a heads up that restarting SSH will kick them from their current session.\nOverview Honeypots are useful tools for collecting unauthorized ‚Ä¶","keywords":["honeypot","Go","SSH","analysis","GCP","tutorial","HoneyTrap","Docker"],"articleBody":"Updated 2021-03-01: Give the reader a heads up that restarting SSH will kick them from their current session.\nOverview Honeypots are useful tools for collecting unauthorized interactions as logs. These logs can be digested to identify new attacking techniques or observe active username/password patterns. In the context of a security team, it could provide actionable information to pre-emptively secure the studied environment.\nThis tutorial will discuss general SSH honeypot pre-configuration, HoneyTrap installation, logging, and analysis. A docker continer is used to launch a low interaction SSH honeypot HoneyTrap. Check out the HoneyTrap documentation for more information about HoneyTrap and what HoneyTrap can do.\nPre-Configuration The honeypot workstation for this tutorial is GCP e2-micro instance running Ubuntu 16.04 LTS.\nSSH Service To log unauthorized interactions with the SSH service the default port 22 will be used by the fake honeypot service. The real SSH service will need to be moved to another port. For this tutorial port 1025 is used.\nFirst change the SSH service port number by editing sshd_config.\nsudo vim /etc/ssh/sshd_config Where the file reads‚Ä¶\n# What ports, IPs, and protocols we listen for ‚Ä¶change Port 22 to Port 1025 and uncomment ListenAddress 0.0.0.0 and ListenAddress :: as shown below.\nPlease wait to restart the SSH service else you may lock yourself out.\nFirewall Changes Use ufw to open up the new port for the SSH service.\n$ sudo ufw allow 1025/tcp Rules updated Rules updated (v6) Restart the ssh service with sudo systemctl restart sshd. If you connected to this VM over SSH you‚Äôll be kicked at this point.\nNow go to the GCP console and navigate to the firewall for the managed instance. In the firewall rule table, click on the name ‚Äúdefault-allow-ssh‚Äù  Edit. Navigate to ‚ÄúProtocols and Ports‚Äù and change the specified port from 22 to the desired port number, we‚Äôll use port 1025 for this example.\nNow add another rule for wild traffic on port 22. You should now be able to login from the custom port 1025 and honeypot traffic should be able to communicate out port 22.\nReturn to the honeypot instance. If you are SSH-ing in from the console, use the drop-down selector and choose ‚ÄúOpen in browser window on custom port‚Äù to login using port 1025.\nInstall Docker Almost done with pre-configuration. Finally, install docker.\nHoneypot Installation At this point you should be able to install and run any functioning docker honeypot on port 22. We are using HoneyTrap for this tutorial because of ease of installation: you can pull the container and run it on port 22 with this command:\nsudo docker run -ditp 22:8022 honeytrap/honeytrap:latest Be sure to run the container in detached mode -d so that after you log out of the terminal session the container continues to run.\nYou can confirm the docker container is running with the command docker container ls:\n$ sudo docker container ls CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 713be5f8fa05 honeytrap/honeytrap:latest \"/honeytrap/honeytra‚Ä¶\" 33 seconds ago Up 32 seconds 5900/tcp, 0.0.0.0:22-8022/tcp happy_freebird Logs can be viewed by running sudo docker logs CONTAINER_NAME:\n$ sudo docker logs angry_chatterjee 2021/03/01 18:30:18 Using config file /config/config.toml _ _ _____ üçØ | | | | ___ _ __ ___ _ |_ _| __ __ _ _ __ | |_| |/ _ \\| '_ \\ / _ \\ | | || || '__/ _' | '_ \\ | _ | (_) | | | | __/ |_| || || | | (_| | |_) | |_| |_|\\___/|_| |_|\\___|\\__, ||_||_| \\__,_| .__/ |___/ |_| Honeytrap starting... Version: DEVELOPMENT.GOGET (DEVELOPMENT.) Observing traffic Verify this honeypot is running by attempting to login from a remote client. As HoneyTrap runs on the GCP host, custom verbose debug logs are generated and printed to stdout. When an interaction is detected a log is created to record the behavior, otherwise periodically a heartbeat is logged to confirm to the operator the honeypot is alive and listening.\nPassword Guessing We can see an example of password gueesing in the log snippet below. IP 113.128.246.50 attempts to login to HoneyTrap over port 22 using the password adminbigdata:\nAfter successfully guessing or cracking the HoneyTrap login credentials (username=\"root\" password ‚Äúpassword\") the attacker will see the following fake Ubuntu prompt.\nAny attempted commands appear in the logs character by character. An exit command would appear in the logs as:\nLogging Behaviors In another example, the value ssh.exec[] stores the movements of an attacker from source ip 71.214.59.235 sending exec commands over ssh (without logging in). They send 9 commands before realizing they are in a honeypot, at which point they say hello before disconnecting. Below you can see a screenshot of the logs storing ssh.exec[] values and then the entered commands in plaintext.\n/ip cloud print ifconfig uname -a cat /proc/cpuinfo ps | grep '[Mm]iner' ls -la /dev/ttyGSM* /dev/ttyUSB-mod* /var/spool/sms/* /var/log/smsd.log /etc/smsd.conf* /usr/bin/qmuxd /var/qmux_connect_socket /etc/config/simman /dev/modem* /var/config/sms/* echo Hi | cat -n Analysis To collect information from docker, output the logs to a text file and move the text file to another workstation for log ingestion and analysis.\nsudo docker logs CONTAINER_NAME  OUTPUTFILE.txt Script I made a script to parse the logs for some basic information including source-ip addresses, commands, and usernames/passwords attempted. Check out the gist here.\nFinal Thoughts Hosting honeypots on cloud architecture enables security researchers to quickly experiement without endangering local networks. It is not without its own considerations, the researcher should monitor and secure the research workstation and have a plan in the event of compromise. Open-source honeypots are commonly criticized for being easy to detect, evade, and come with security vulnerabilities of their own. In additon to making a plan for the honeypot lifecycle, make a plan for log collection and ingestion to automate log analysis and data visualization.\nAdditionally, the default username of the cloud machine will be the username of the gmail address used by GCP. A researcher using firstnameLastname@gmail[dot]com may allow an attacker to identify the first and last name of the researcher. This can be mitigated by adding a new user to the honeypot and removing the old firstnameLastname user. Usernames associated with social media account present similar concerns. Note also at the time of compute instance creation, the hostname set in the networking section defaults to HOSTNAME.REGION.PROJECT_NAME.internal where PROJECT_NAME and hosting region are exposed.\n","wordCount":"1049","inLanguage":"en","image":"https://malwaremily.com/img/005-logs.png","datePublished":"2021-01-25T00:00:03Z","dateModified":"2021-01-25T00:00:03Z","author":{"@type":"Person","name":"malwaremily"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://malwaremily.com/posts/005-honeypots-cloud/"},"publisher":{"@type":"Organization","name":"malwaremily","logo":{"@type":"ImageObject","url":"https://malwaremily.com/favicon.ico"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>.theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://malwaremily.com/ accesskey=h title="Home (Alt + H)"><img src=coffeaarabica400x400.png alt=logo aria-label=logo height=35>Home</a>
<span class=logo-switches><span class=theme-toggle title="(Alt + T)"><a id=theme-toggle accesskey=t><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></a></span></span></div><ul class=menu id=menu onscroll=menu_on_scroll()><li><a href=https://malwaremily.com/about/ title=ABOUT><span>ABOUT</span></a></li><li><a href=https://malwaremily.com/archives/ title=ARCHIVES><span>ARCHIVES</span></a></li><li><a href=https://malwaremily.com/search/ title="SEARCH (Alt + /)" accesskey=/><span>SEARCH</span></a></li><li><a href=https://malwaremily.com/tags/ title=TAGS><span>TAGS</span></a></li><li><a href=https://malwaremily.com title=HOME><span>HOME</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>HoneyTraps in the Cloud 101</h1><div class=post-description>SSH Honeypot on GCP Tutorial</div><div class=post-meta>January 25, 2021&nbsp;¬∑&nbsp;5 min</div></header><figure class=entry-cover><img src=https://malwaremily.com/img/005-logs.png alt="HoneyTrap Logs"><p></p></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><blockquote><ul><li><a href=#overview aria-label=Overview>Overview</a></li><li><a href=#pre-configuration aria-label=Pre-Configuration>Pre-Configuration</a><ul><li><a href=#ssh-service aria-label="SSH Service">SSH Service</a></li><li><a href=#firewall-changes aria-label="Firewall Changes">Firewall Changes</a></li><li><a href=#install-docker aria-label="Install Docker">Install Docker</a></li></ul></li><li><a href=#honeypot-installation aria-label="Honeypot Installation">Honeypot Installation</a><ul><li><a href=#observing-traffic aria-label="Observing traffic">Observing traffic</a></li><li><a href=#password-guessing aria-label="Password Guessing">Password Guessing</a></li><li><a href=#logging-behaviors aria-label="Logging Behaviors">Logging Behaviors</a></li></ul></li><li><a href=#analysis aria-label=Analysis>Analysis</a><ul><li><a href=#script aria-label=Script>Script</a></li></ul></li><li><a href=#final-thoughts aria-label="Final Thoughts">Final Thoughts</a></li></ul></blockquote></details></div><div class=post-content><p>Updated 2021-03-01: Give the reader a heads up that restarting SSH will kick them from their current session.</p><h2 id=overview>Overview<a hidden class=anchor aria-hidden=true href=#overview>#</a></h2><p>Honeypots are useful tools for collecting unauthorized interactions as logs. These logs can be digested to identify new attacking techniques or observe active username/password patterns. In the context of a security team, it could provide actionable information to pre-emptively secure the studied environment.</p><p>This tutorial will discuss general SSH honeypot pre-configuration, <code>HoneyTrap</code> installation, logging, and analysis. A <a href=https://hub.docker.com/r/HoneyTrap/HoneyTrap/>docker continer</a> is used to launch a low interaction SSH honeypot <code>HoneyTrap</code>. Check out the <a href=https://docs.HoneyTrap.io/manuals/>HoneyTrap documentation</a> for more information about <code>HoneyTrap</code> and what <code>HoneyTrap</code> can do.</p><h2 id=pre-configuration>Pre-Configuration<a hidden class=anchor aria-hidden=true href=#pre-configuration>#</a></h2><p>The honeypot workstation for this tutorial is GCP e2-micro instance running Ubuntu 16.04 LTS.</p><h3 id=ssh-service>SSH Service<a hidden class=anchor aria-hidden=true href=#ssh-service>#</a></h3><p>To log unauthorized interactions with the SSH service the default port <code>22</code> will be used by the fake honeypot service. The real SSH service will need to be moved to another port. For this tutorial port <code>1025</code> is used.</p><p>First change the SSH service port number by editing <code>sshd_config</code>.</p><pre><code>sudo vim /etc/ssh/sshd_config
</code></pre><p>Where the file reads&mldr;</p><pre><code># What ports, IPs, and protocols we listen for
</code></pre><p>&mldr;change <code>Port 22</code> to <code>Port 1025</code> and uncomment <code>ListenAddress 0.0.0.0</code> and <code>ListenAddress ::</code> as shown below.</p><p><img src=/img/005-sshdconfig.png alt=sshdconfig></p><p>Please wait to restart the SSH service else you may lock yourself out.</p><h3 id=firewall-changes>Firewall Changes<a hidden class=anchor aria-hidden=true href=#firewall-changes>#</a></h3><p>Use <code>ufw</code> to open up the new port for the SSH service.</p><pre><code>$ sudo ufw allow 1025/tcp
Rules updated
Rules updated (v6)
</code></pre><p>Restart the ssh service with <code>sudo systemctl restart sshd</code>. If you connected to this VM over SSH you&rsquo;ll be kicked at this point.</p><p>Now go to the GCP console and navigate to the firewall for the managed instance. In the firewall rule table, click on the name &ldquo;default-allow-ssh&rdquo; > Edit. Navigate to &ldquo;Protocols and Ports&rdquo; and change the specified port from <code>22</code> to the desired port number, we&rsquo;ll use port <code>1025</code> for this example.</p><p>Now add another rule for wild traffic on port <code>22</code>. You should now be able to login from the custom port <code>1025</code> and honeypot traffic should be able to communicate out port <code>22</code>.</p><p><img src=/img/005-firewall.png alt="GCP Firewall Rules"></p><p>Return to the honeypot instance. If you are SSH-ing in from the console, use the drop-down selector and choose &ldquo;Open in browser window on custom port&rdquo; to login using port <code>1025</code>.</p><h3 id=install-docker>Install Docker<a hidden class=anchor aria-hidden=true href=#install-docker>#</a></h3><p>Almost done with pre-configuration. Finally, <a href=https://docs.docker.com/engine/install/ubuntu/>install docker</a>.</p><h2 id=honeypot-installation>Honeypot Installation<a hidden class=anchor aria-hidden=true href=#honeypot-installation>#</a></h2><p>At this point you should be able to install and run any functioning docker honeypot on port <code>22</code>. We are using <code>HoneyTrap</code> for this tutorial because of ease of installation: you can pull the container and run it on port <code>22</code> with this command:</p><pre><code>sudo docker run -ditp 22:8022 honeytrap/honeytrap:latest
</code></pre><p>Be sure to run the container in detached mode <code>-d</code> so that after you log out of the terminal session the container continues to run.</p><p>You can confirm the docker container is running with the command <code>docker container ls</code>:</p><pre><code>$ sudo docker container ls
CONTAINER ID   IMAGE                        COMMAND                  CREATED          STATUS          PORTS                            NAMES
713be5f8fa05   honeytrap/honeytrap:latest   &quot;/honeytrap/honeytra‚Ä¶&quot;   33 seconds ago   Up 32 seconds   5900/tcp, 0.0.0.0:22-&gt;8022/tcp   happy_freebird
</code></pre><p>Logs can be viewed by running <code>sudo docker logs CONTAINER_NAME</code>:</p><pre><code>$ sudo docker logs angry_chatterjee
2021/03/01 18:30:18 Using config file /config/config.toml

 _   _                       _____                üçØ
| | | | ___  _ __   ___ _   |_   _| __ __ _ _ __
| |_| |/ _ \| '_ \ / _ \ | | || || '__/ _' | '_ \
|  _  | (_) | | | |  __/ |_| || || | | (_| | |_) |
|_| |_|\___/|_| |_|\___|\__, ||_||_|  \__,_| .__/
                        |___/              |_|

Honeytrap starting...
Version: DEVELOPMENT.GOGET (DEVELOPMENT.)
</code></pre><h3 id=observing-traffic>Observing traffic<a hidden class=anchor aria-hidden=true href=#observing-traffic>#</a></h3><p>Verify this honeypot is running by attempting to login from a remote client. As <code>HoneyTrap</code> runs on the GCP host, custom verbose debug logs are generated and printed to <code>stdout</code>. When an interaction is detected a log is created to record the behavior, otherwise periodically a heartbeat is logged to confirm to the operator the honeypot is alive and listening.</p><p><img src=/img/005-logs.png alt=logs></p><h3 id=password-guessing>Password Guessing<a hidden class=anchor aria-hidden=true href=#password-guessing>#</a></h3><p>We can see an example of password gueesing in the log snippet below. IP <code>113.128.246.50</code> attempts to login to <code>HoneyTrap</code> over port <code>22</code> using the password <code>adminbigdata</code>:</p><p><img src=/img/005-logs2.png alt="login test attempt"></p><p>After successfully guessing or cracking the <code>HoneyTrap</code> login credentials (username="<code>root</code>" password &ldquo;<code>password</code>") the attacker will see the following fake Ubuntu prompt.</p><p><img src=/img/005-fakelogin.png alt="login test attempt"></p><p>Any attempted commands appear in the logs character by character. An <code>exit</code> command would appear in the logs as:</p><p><img src=/img/005-loginbehavior.png alt="successful login behavior log"></p><h3 id=logging-behaviors>Logging Behaviors<a hidden class=anchor aria-hidden=true href=#logging-behaviors>#</a></h3><p>In another example, the value <code>ssh.exec[]</code> stores the movements of an attacker from source ip <code>71.214.59.235</code> sending exec commands over ssh (without logging in). They send 9 commands before realizing they are in a honeypot, at which point they say hello before disconnecting. Below you can see a screenshot of the logs storing <code>ssh.exec[]</code> values and then the entered commands in plaintext.</p><p><img src=/img/005-hello.png alt="Realize its a honeypot"></p><pre><code>/ip cloud print
ifconfig
uname -a
cat /proc/cpuinfo
ps | grep '[Mm]iner'
ls -la /dev/ttyGSM* /dev/ttyUSB-mod* /var/spool/sms/* /var/log/smsd.log /etc/smsd.conf* /usr/bin/qmuxd /var/qmux_connect_socket /etc/config/simman /dev/modem* /var/config/sms/*
echo Hi | cat -n
</code></pre><h2 id=analysis>Analysis<a hidden class=anchor aria-hidden=true href=#analysis>#</a></h2><p>To collect information from docker, output the logs to a text file and move the text file to another workstation for log ingestion and analysis.</p><pre><code>sudo docker logs CONTAINER_NAME &gt; OUTPUTFILE.txt
</code></pre><h3 id=script>Script<a hidden class=anchor aria-hidden=true href=#script>#</a></h3><p>I made a script to parse the logs for some basic information including source-ip addresses, commands, and usernames/passwords attempted. Check out the gist <a href=https://gist.github.com/malwaremily/1d1944862cf1af5886c0787ba428b661>here</a>.</p><h2 id=final-thoughts>Final Thoughts<a hidden class=anchor aria-hidden=true href=#final-thoughts>#</a></h2><p>Hosting honeypots on cloud architecture enables security researchers to quickly experiement without endangering local networks. It is not without its own considerations, the researcher should monitor and secure the research workstation and have a plan in the event of compromise. Open-source honeypots are commonly criticized for being easy to detect, evade, and come with security vulnerabilities of their own. In additon to making a plan for the honeypot lifecycle, make a plan for log collection and ingestion to automate log analysis and data visualization.</p><p>Additionally, the default username of the cloud machine will be the username of the gmail address used by GCP. A researcher using <code>firstnameLastname@gmail[dot]com</code> may allow an attacker to identify the first and last name of the researcher. This can be mitigated by adding a new user to the honeypot and removing the old <code>firstnameLastname</code> user. Usernames associated with social media account present similar concerns. Note also at the time of compute instance creation, the hostname set in the networking section defaults to <code>HOSTNAME.REGION.PROJECT_NAME.internal</code> where PROJECT_NAME and hosting region are exposed.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://malwaremily.com/tags/honeypot/>honeypot</a></li><li><a href=https://malwaremily.com/tags/go/>Go</a></li><li><a href=https://malwaremily.com/tags/ssh/>SSH</a></li><li><a href=https://malwaremily.com/tags/analysis/>analysis</a></li><li><a href=https://malwaremily.com/tags/gcp/>GCP</a></li><li><a href=https://malwaremily.com/tags/tutorial/>tutorial</a></li><li><a href=https://malwaremily.com/tags/honeytrap/>HoneyTrap</a></li><li><a href=https://malwaremily.com/tags/docker/>Docker</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://malwaremily.com/>malwaremily</a></span>
<span>&#183;</span>
<span>Made with ‚ô• by Emily</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.replaceState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>