---
title: "Automate Log Analysis with BigQuery Clients"
date: 2021-02-09T00:00:03+00:00
weight: 1
aliases: ["/012-bigquery"]
tags: ["bigquery", "GCP", "honeypot", "gcloud", "Go"]
author: "malwaremily"
showToc: true
TocOpen: false
draft: true
hidemeta: false
disableShare: false
cover:
    image: "/img/012-SQLquery.png" # image path/url
    alt: "Image from Blog - String Table" # alt text
    caption: "<text>" # display caption under cover
    relative: false # when using page bundles set this to true
    hidden: false # only hide on current single page
comments: false
description: "Learn BitQuery basics using a simple password attempt log."
disableHLJS: true # to disable highlightjs
---

We've got our honeypots running and we're collecting data. Now its time to forward that data to BigQuery for analysis using a BigQuery client written in Go. This article will walk you through using the BitQuery client. 

## Pre-Config
1. You have [already installed the Google Cloud SDK and Golang](https://cloud.google.com/go/docs/setup).
2. You have a virtual machine running a [honeypot service](https://www.malwaremily.com/posts/005-honeypots-cloud/).

## Install Client Library
First, we'll need to grab the client library. This make take a moment, I recommend using the `--verbose` flag `-v` in order to see whats going on.
```
go get -u -v cloud.google.com/go/bigquery
```

## Authenticate to GCP
The BigQuery client library requires an authenticated connection to GCP. To do so we will need to create a service-account, so that we may track and manage changes made via BigQuery clients. We will create a private/public key pairing, so that we may securely communicate using assemetric encryption. And finally we will create an environment variable, to quickly point to our public key assigned to the IAM service account.





## Client Example
Google [documentation](https://cloud.google.com/bigquery/docs/reference/libraries) provides the following basic client as an example:

{{< gist malwaremily 3649eceb6d5ae7798098b81f0b267c10 >}}



